{% extends '::base.html.twig' %}
     {% block stylesheets %}
         <!--     Fonts and icons     -->

         <link rel="stylesheet"  href="https://fonts.googleapis.com/icon?family=Material+Icons" />
         <link rel="stylesheet"  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
         <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
         <!-- CSS Files -->

         <link rel="stylesheet"   href="{{ asset('assets/css/bootstrap.min.css') }}" />
         <!-- CSS Just for demo purpose, don't include it in your project -->

         <link rel="stylesheet"   href="{{ asset('assets/css/material-dashboard.css') }}" />

         <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">
         <script src="{{ asset('assets/js/jquery-3.2.0.min.js') }}"></script>
         <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBV5eAN00x_NQQRncHIo0rmTXxiE9B4iWw&libraries=geometry,places"></script>
         <style>
             .map-container {
                 display: inline-block;
                 height: 600px;
                 width: 80%;
                 margin: 0% 10%;
             }
             li{
                 list-style:none;

                 text-decoration: none;
             }
         </style>
     {% endblock %}
{% block body %}
    <div id="imprimir ">
        <button class="map-print">print</button>
    </div>

    <div class="col-sm-4 col-lg-offset-4">
        <div class="form-group label-floating divsRadios">
            <label class="control-label">Problematicas</label>
            <select  id="appbundle_test_tipoproblematica" class="form-control">
                <option value></option>
                <option value="1">Luminarias</option>
                <option value="2">Obras Publicas</option>
                <option value="3">Higiene Urbana</option>
                <option value="4">Seguridad</option>
                <option value="5">Transito</option>
                <option value="6">Espacios Verdes</option>
            </select>
        </div>
    </div>
    <br>
    <br>
    <div class="map-container"></div>




{% endblock %}

{% block javascripts %}
    <script>

        /**
         * My very own *not* quite hackish approach to workaround Google Maps printing,
         * crafted with <3.
         * @see http://stackoverflow.com/q/13050215/2013891
         */
        $(function () {

            // Java
//            var center = new google.maps.LatLng(-7.4917, 110.0044);

            // Jakarta, Bogor, Bekasi, Tangerang, Surabaya
            var locations = [
                { lat: -6.1745, lng: 106.8227 },
                { lat: -6.6000, lng: 106.8000 },
                { lat: -6.2333, lng: 107.0000 },
                { lat: -6.1783, lng: 106.6319 },
                { lat: -7.2653, lng: 112.7425 },
            ];
            var a=[{"id":"1",
                "localidad":"leopoldo lugones",
                "latitud":"-33.1141815",
                "longitud":"-64.3691723",
                "observacion":"no hay luz",
                "nombre":"Luminarias",
                "marcador":"yellow-dot.png"},
                {"id":"2",
                    "localidad":"sobremonte",
                    "latitud":"-33.1216261",
                    "longitud":"-64.3478411",
                    "observacion":"vive una chica linda",
                    "nombre":"Seguridad",
                    "marcador":"red-dot.png"}
            ];

            var mapContainer = $('.map-container');
            var map = new google.maps.Map(mapContainer[0], {
                zoom: 13,
                center: new google.maps.LatLng( -33.1244068, -64.3421894,13),
                mapTypeId: google.maps.MapTypeId.ROADMAP,

            });

            var markers = (a)
                    .map(function (loc) {
                        return new google.maps.Marker({
                            position: new google.maps.LatLng(loc.latitud, loc.longitud),
                            icon: 'assets/img/'+loc.marcador,
                            title:'Nombre: '+loc.nombre+' Problematica: '+loc.observacion,
                            map: map,
                            draggable:true




                        });
                    })


                    .forEach(function (marker) {
                        marker.setMap(map);

                    });

//            new MarkerClusterer(map, markers);



            $('.map-print').on('click',

                    // printAnyMaps :: _ -> HTML
                    function printAnyMaps() {
                        var $body = $('body');
                        var $mapContainer = $('.map-container');
                        var $mapContainerParent = $mapContainer.parent();
                        var $printContainer = $('<div style="position:relative;">');

                        $printContainer
                                .height($mapContainer.height())
                                .append($mapContainer)
                                .prependTo($body);

                        var $content = $body
                                .children()
                                .not($printContainer)
                                .not('script')
                                .detach();

                        /**
                         * Needed for those who use Bootstrap 3.x, because some of
                         * its `@media print` styles ain't play nicely when printing.
                         */
                        var $patchedStyle = $('<style media="print">')
                                .text(
                                        'img { max-width: none !important; }' +
                                        'a[href]:after { content: ""; }'
                                )
                                .appendTo('head');

                        window.print();

                        $body.prepend($content);
                        $mapContainerParent.prepend($mapContainer);

                        $printContainer.remove();
                        $patchedStyle.remove();
                    });
        });

    </script>

{% endblock %}
